# 🍪 Cookie Sniffer - 智能Cookie捕获工具

一个功能强大的Chrome扩展，用于智能捕获和管理网站Cookie。支持自定义匹配规则、历史记录管理、规则导入导出等功能。

## ✨ 主要功能

### 🔍 智能Cookie捕获
- **多模式匹配**: 支持关键词、全匹配、正则表达式三种匹配模式
- **实时监控**: 自动监控网络请求，实时捕获匹配的Cookie
- **智能过滤**: 只捕获符合规则的Cookie，避免无关数据干扰

### 📊 历史记录管理
- **时间标注**: 每个捕获的Cookie都标注了精确的时间戳
- **来源追踪**: 显示Cookie的来源URL和匹配规则信息
- **快速复制**: 一键复制历史Cookie，支持批量操作
- **URL展开**: 点击URL可展开查看完整地址

### ⚙️ 设置管理
- **输入记忆**: 自动记住上次填写的规则内容，提高使用效率
- **自动保存**: 规则自动持久化保存，清缓存不影响规则
- **简洁界面**: 设置功能独立弹框，保持主界面简洁

### 📤 规则导入导出
- **文件导入**: 支持直接选择JSON文件导入规则
- **文本导入**: 支持粘贴JSON文本导入规则
- **JSON格式**: 支持标准JSON格式的规则导入导出
- **批量操作**: 一次性导入多条规则，提高配置效率
- **版本控制**: 导出文件包含版本信息和时间戳

## 🚀 新功能特性

### 1. 优化的界面设计
- **简洁布局**: 重新设计界面，突出核心功能
- **设置弹框**: 设置功能独立弹框，包含完整的规则管理功能
- **时间显示**: Cookie来源URL优化显示，添加时间标注
- **URL展开**: 点击URL可展开查看完整地址

### 2. 增强的用户体验
- **输入记忆**: 自动记住上次填写的规则内容，避免重复输入
- **智能提示**: 操作反馈和错误提示，提升使用体验
- **文件导入**: 支持直接选择文件导入，操作更便捷

### 3. 数据持久化
- **规则保护**: 清缓存时保留自定义规则
- **设置保存**: 用户设置自动保存和恢复
- **历史记录**: 历史数据持久化存储

## 📦 安装方法

### 方法一：Chrome Web Store（推荐）
1. 访问 [Chrome Web Store](https://chrome.google.com/webstore/)
2. 搜索 "Cookie Sniffer"
3. 点击"添加至Chrome"安装

### 方法二：开发者模式安装
1. 下载项目文件
2. 打开Chrome，进入 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹

## 🎯 使用指南

### 基本使用
1. **安装扩展**: 按照上述方法安装扩展
2. **打开弹窗**: 点击浏览器工具栏中的Cookie Sniffer图标
3. **查看Cookie**: 自动捕获的Cookie会显示在"最新捕获的Cookie"区域
4. **复制Cookie**: 点击"复制Cookie"按钮复制到剪贴板
5. **查看URL**: 点击Cookie来源URL可展开查看完整地址

### 自定义规则配置
1. **打开设置**: 点击弹窗右上角的设置按钮(⚙️)
2. **添加规则**: 在"自定义匹配规则"区域填写规则信息
   - 规则名称: 给规则起一个便于识别的名称
   - 匹配值: 要匹配的URL内容
   - 匹配类型: 选择关键词、全匹配或正则表达式
   - 页面URL: 可选，用于一键打开相关页面

3. **规则类型说明**:
   - **关键词**: URL包含指定关键词即匹配
   - **全匹配**: URL完全等于指定值才匹配
   - **正则**: 使用正则表达式进行匹配

4. **规则管理**:
   - 编辑规则: 点击规则右侧的编辑按钮
   - 删除规则: 点击规则右侧的删除按钮
   - 导入导出: 使用"导出规则"和"导入规则"按钮

### 导入导出功能
1. **导出规则**: 点击"导出规则"按钮，自动下载JSON文件
2. **导入规则**: 点击"导入规则"按钮，支持两种方式：
   - 选择文件: 直接选择JSON文件导入
   - 粘贴文本: 粘贴JSON内容导入
3. **智能去重**: 导入时会自动去重，避免重复规则

### 历史记录管理
1. **查看历史**: 在"历史记录"区域查看所有捕获的Cookie
2. **复制历史**: 点击历史记录中的"复制"按钮
3. **查看详情**: 点击URL可切换显示完整/截断版本
4. **清空历史**: 点击"清空"按钮清除所有历史记录

## 🔧 高级功能

### 正则表达式支持
支持完整的正则表达式语法，例如：
- `/api/v\d+/` - 匹配API版本路径
- `/user/\d+` - 匹配用户ID路径
- `https://.*\.example\.com` - 匹配特定域名

### 规则导入导出
1. **导出规则**: 点击"导出规则"按钮，自动下载JSON文件
2. **导入规则**: 支持文件选择和文本粘贴两种方式
3. **格式示例**:
```json
{
  "version": "1.0",
  "exportTime": "2024-01-01T00:00:00.000Z",
  "rules": [
    {
      "key": "api-keyword",
      "value": "/api/",
      "type": "关键词",
      "url": ""
    }
  ]
}
```

### 测试功能
使用提供的测试页面验证功能：
1. 打开 `test.html` 文件
2. 点击各种测试按钮
3. 查看扩展是否捕获到相应的Cookie

## 🛠️ 技术特性

### 性能优化
- **轻量级**: 最小化资源占用，不影响浏览器性能
- **智能缓存**: 优化存储机制，提高响应速度
- **异步处理**: 使用异步操作，避免界面阻塞

### 数据安全
- **本地存储**: 所有数据存储在本地，不上传服务器
- **隐私保护**: 不收集用户个人信息
- **权限最小化**: 只请求必要的权限

### 兼容性
- **Chrome 88+**: 支持最新版本的Chrome浏览器
- **Edge**: 兼容基于Chromium的Edge浏览器
- **其他Chromium内核浏览器**: 理论上兼容所有Chromium内核浏览器

## 📝 更新日志

### v2.1.0 (最新版本)
- ✨ 新增文件导入功能，支持直接选择JSON文件导入
- ✨ 优化设置弹框，将规则管理功能整合到设置中
- ✨ 改进URL显示，支持点击展开查看完整地址
- ✨ 默认启用输入记忆和自动保存功能
- 🔧 简化界面，移除置顶功能
- 🔧 优化导入导出用户体验
- 🐛 修复导入功能无响应的问题

### v2.0.0
- ✨ 新增设置弹框功能
- ✨ 新增规则导入导出功能
- ✨ 新增插件置顶功能
- ✨ 新增输入记忆功能
- ✨ 优化Cookie显示格式，添加时间标注
- ✨ 优化URL显示，支持截断和展开
- 🔧 改进规则持久化机制
- 🔧 优化界面布局和用户体验
- 🐛 修复清缓存时规则丢失的问题

### v1.0.0
- 🎉 初始版本发布
- ✨ 基本Cookie捕获功能
- ✨ 自定义匹配规则
- ✨ 历史记录管理
- ✨ 正则表达式支持

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

### 开发环境设置
1. 克隆项目: `git clone [repository-url]`
2. 安装依赖: 无需额外依赖
3. 加载扩展: 在Chrome开发者模式下加载
4. 开始开发: 修改代码后刷新扩展

### 代码规范
- 使用ES6+语法
- 遵循Chrome扩展开发最佳实践
- 添加适当的注释和文档

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户！

---

**注意**: 本工具仅用于合法的开发和测试目的。请遵守相关网站的使用条款和隐私政策。 